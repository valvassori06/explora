<!DOCTYPE html> <!-- define o tipo do documento (HTML5) -->
<html lang="pt-BR"> <!-- define o idioma principal como portuguÃªs do Brasil -->

<head>
  <meta charset="UTF-8" /> <!-- permite o uso de acentos e caracteres especiais -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!-- torna o layout responsivo -->
  <title>Explora â€” Feedback</title> <!-- tÃ­tulo exibido na aba do navegador -->

  <!-- Importa o CSS da pÃ¡gina e a fonte Poppins -->
  <link rel="stylesheet" href="../styles/feedback.css" /> <!-- arquivo de estilo especÃ­fico do feedback -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" /> <!-- fonte Poppins do Google Fonts -->
</head>

<body>
  <!-- ==================== CABEÃ‡ALHO ==================== -->
  <header>
    <img class="logo" src="../../public/logos/llogo.png" alt="Logo Explora" /> <!-- logo do site -->
    <nav class="navegacao"> <!-- menu de navegaÃ§Ã£o -->
      <a href="index.html">InÃ­cio</a> <!-- link para a pÃ¡gina inicial -->
      <a href="planejar.html">Planejar</a> <!-- link para a pÃ¡gina de planejamento -->
      <a href="roteiros.html">Roteiros</a> <!-- link para a pÃ¡gina de roteiros -->
    </nav>
  </header>

  <!-- ==================== CONTEÃšDO PRINCIPAL ==================== -->
  <main>
    <section class="card"> <!-- cartÃ£o visual central com o formulÃ¡rio -->
      <span class="badge" aria-hidden="true">âœ¨ Ouvimos a sua voz</span> <!-- selo decorativo -->
      <h1>Queremos a sua opiniÃ£o <span aria-hidden="true">ðŸ’¬</span></h1> <!-- tÃ­tulo principal -->
      <p>
        Conte pra gente como foi sua experiÃªncia com o Explora, quais recursos vocÃª amou e o que ainda pode melhorar.
        Nosso time lÃª cada feedback com carinho.
      </p>

      <!-- ===== FORMULÃRIO DE FEEDBACK ===== -->
      <form id="feedbackForm" novalidate> <!-- formulÃ¡rio sem validaÃ§Ã£o automÃ¡tica do navegador -->
        <div class="form-row"> <!-- agrupa os campos em linha -->
          <input type="text" id="fbNome" placeholder="Seu nome (opcional)" /> <!-- campo nome -->
          <input type="email" id="fbEmail" placeholder="Seu e-mail (opcional)" /> <!-- campo e-mail -->
        </div>

        <textarea id="fbMensagem" placeholder="Deixe suas opiniÃµes, sugestÃµes e bugs encontrados..." required></textarea> <!-- campo de texto obrigatÃ³rio -->

        <button type="submit" class="btn">Enviar feedback</button> <!-- botÃ£o de envio -->

        <!-- mensagem de sucesso oculta, aparece apÃ³s o envio -->
        <div id="fbOk" class="success" role="status" aria-live="polite">
          Obrigada! Seu feedback foi registrado.
        </div>
      </form>
    </section>
  </main>

  <!-- ==================== SCRIPTS ==================== -->
  <script src="../script/auth.js"></script> <!-- script auxiliar (ex: controle de login) -->

  <script>
    // Salva feedback localmente no navegador (simulaÃ§Ã£o de envio)
    let successTimeout; // variÃ¡vel usada para esconder a mensagem apÃ³s um tempo

    // adiciona o evento de envio no formulÃ¡rio
    document.getElementById('feedbackForm').addEventListener('submit', function (e) {
      e.preventDefault(); // impede o recarregamento da pÃ¡gina

      // coleta os valores digitados nos campos
      const nome = document.getElementById('fbNome').value.trim();
      const email = document.getElementById('fbEmail').value.trim();
      const msg = document.getElementById('fbMensagem').value.trim();
      const success = document.getElementById('fbOk');

      // se a mensagem estiver vazia, mostra alerta e interrompe o envio
      if (!msg) {
        alert('Escreva sua mensagem.');
        return;
      }

      // cria um objeto com os dados preenchidos
      const item = { nome, email, msg, ts: new Date().toISOString() };

      // busca os feedbacks anteriores no armazenamento local (localStorage)
      const arr = JSON.parse(localStorage.getItem('explora.feedback') || '[]');
      arr.push(item); // adiciona o novo feedback no array

      // salva o array atualizado de volta no localStorage
      localStorage.setItem('explora.feedback', JSON.stringify(arr));

      // mostra a mensagem de sucesso por alguns segundos
      clearTimeout(successTimeout);
      success.classList.add('is-visible'); // exibe a mensagem
      successTimeout = setTimeout(() => success.classList.remove('is-visible'), 4200); // esconde depois de 4,2s

      // limpa os campos do formulÃ¡rio
      this.reset();
    });
  </script>
</body>
</html>
